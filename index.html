<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Giphy Homework</title>

    <!--linking CSS-->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--adding in jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
  

    <div>
        <h2> Kayley's Giphy Homework!</h2>
    </div>


    <div id="buttons"></div>

    <div class="gifs"></div>

    <form id="search">
         Add a new button! <br>
        <input type="text"> <br>
        <input type="submit" value="Submit"> 
    </form>

    <script type="text/javascript">

        var topics = ["Golden Retriever", "Beach", "Georgia", "Dolly Parton", "Boats"];

        //creating function to display buttons on page
        function renderButtons(){

            $("#buttons").empty;

            // assigns each topic to a button
            for (var i = 0; i < topics.length; i++) 
                {
                    $("#buttons").append("<button>" + topics[i] + "</button>");

                };
        };

        //calling the renderButtons function
        renderButtons();

        //whenever a button is clicked, the gifs for that topic should be displayed
        $("button").on("click", function() {

        //for whichever topic button the user clicks
        //i need something here to recognize the button I am selecting to correspond with the topic in the topics array I created
        var topic = $(this).attr("#buttons");

        var userSearch = "";

        console.log("Button clicked");

        var queryUrl = "https://api.giphy.com/v1/gifs/search?q=" + topic + "&rating=g&api_key=U0Q0VCprObfzUgrS9wtYTFyYLlX0NZL2&limit=10";

        //calling AJAX
        $.ajax({
        url: queryUrl,
        method: "GET"
        }).then(function(response) {

            console.log(response.data);

            var results = response.data;

            for (var i = 0; i < results.length; i++)
            {
                var gifDiv = $("<div>");

                var rating = results[i].rating;

                var p = $("<p>").text("Rating: " + rating);

                var gif = $("<img>");
                gif.attr("src", results[i].images.fixed_height.url);

                gifDiv.prepend(p);
                gifDiv.prepend(gif);

                $(".gifs").prepend(gifDiv);
                
            }

          });

        //ends on click function  
        });

        //need a function to pause and animate each gif that is clicked on
    
    
    </script>
</body>

</html>