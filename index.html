<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Giphy Homework</title>

    <!--linking CSS-->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--adding in jQuery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>
  

    <div>
        <h2> Kayley's Giphy Homework!</h2>

    </div>


    <div id="buttons"></div>

    <div id="gifs-here"></div>
    
    <div id="search">
        <h4>This is where the search will go on the page</h4>
    </div>


    <script type="text/javascript">
    
    var topics = ["Golden Retriever", "Beach", "Georgia", "Dolly Parton", "Boats"];

    // assigns each topic to a button
    for (var i = 0; i < topics.length; i++) 
    {
         var buttons = $("<button>" + topics[i] + "</button>")
        $("#buttons").append(buttons);
     }

    //user clicks a button and ajax is called
    $("button").on("click", function() {

        var userSearch = "";

        console.log("Button clicked");

        //for whichever topic button the user clicks
        var topic = $(this).attr("#buttons");

        var queryUrl = "https://api.giphy.com/v1/gifs/search?q=" + topic + "&rating=g&api_key=U0Q0VCprObfzUgrS9wtYTFyYLlX0NZL2&limit=5";

    //calling AJAX
    $.ajax({
    url: queryUrl,
    method: "GET"
    }).then(function(response) {

        console.log(response);
        var results = response.data;

        for (var i = 0; i < results.length; i++) {
        
            var gifDiv = $("<div>");

            var rating = results[i].rating;

            var p = $("<p>").text("Rating: " + rating);

            var gifImage = $("<img>");
            gifImage.attr("src", results[i].images.fixed_height.url);

            //adding the rating and image
            gifDiv.prepend(p);
            gifDiv.prepend(gifImage);

              //adds gif and rating to the gifs-here div in the HTML
            $("#gifs-here").prepend(gifDiv);
          }
        });
    });
    
    
    
    
    </script>
</body>

</html>